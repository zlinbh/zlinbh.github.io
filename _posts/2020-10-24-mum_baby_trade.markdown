---
layout:     post
title:      "某电商商品交易数据简易分析"
subtitle:   "把握用户信息与商品间的相关性"
date:       2020-10-24
author:     "zlinbh"
hidden:		false
header-img: 
tags:
    - 产品
    - 数据分析
    - Excel
---

## 数据介绍

数据来源：<https://tianchi.aliyun.com/dataset/dataDetail?dataId=45>  

该数据集包含30000+母婴产品交易信息以及1000+婴儿信息，由某电商平台的消费者提供，他们共享这些信息是为了获得更好的推荐或搜索结果。

数据包括记录用户交易信息的mum_baby_trade表以及记录用户(婴儿)信息的mum_baby表，部分数据如下图所示：

|  user_id  | auction_id  |  cat_id  | cat1     | property            | buy_mount | day      |
| :-------: | ----------- | :------: | -------- | ------------------- | --------- | -------- |
| 786295544 | 41098319944 | 50014866 | 50022520 | 21458:86755362      | 2         | 20140919 |
| 532110457 | 17916191097 | 50011993 | 28       | 21458:11399317      | 1         | 20131011 |
| 249013725 | 21896936223 | 50012461 | 50014815 | 21458:30992;1628665 | 1         | 20131011 |

mum_baby_trade表 (cat1: 商品一级分类id, cat_id: 商品二级分类id, day：购买日期)

| user_id | birthday | gender |
| :-----: | :------: | :----: |
|  2757   | 20130311 |   1    |
| 415971  | 20121111 |   0    |
| 1372572 | 20120130 |   2    |

mum_baby表 (其中gender字段: 0-male, 1-female, 2-unknown)

## 分析目标

本次分析目标遵循该数据集分享的初衷，即为了使用户获得更好的推荐或搜索结果。在目前获得的数据范畴内，更好的推荐搜索结果可简化等同于销售量的提高。

为了找到提高销售量的关键，这里采用多维分解的方式，将数据表的列划分为以下三个维度：

<img src="http://qiwjidhsu.hn-bkt.clouddn.com/1024_3.jpg" alt="alt" style="zoom:80%;" />

考虑到个人能力及业务知识的限制，故确定本次分析仅从用户维度出发，分析年龄、性别与商品销量之间的潜在关系。

## 数据清理

由前述确定的分析目标，对数据进行如下处理：

1) 根据user_id的对应关系，合并两表数据。

2) 隐藏不需要的auction_id、cat_id及property列。

3) 重命名列名，对应关系如下：

| user_id |      cat1      | buy_mount |   day    | birthday | gender |
| :-----: | :------------: | :-------: | :------: | :------: | :----: |
| 用户id  | 商品一级分类id | 购买数量  | 购买日期 | 出生日期 |  性别  |

4) 删除步骤 3 中所需字段缺失的行。

5) 对日期列字段进行一致化处理，修正为YYYY/MM/DD的可读格式。

6) 异常值处理：

① 删去购买数量在(0，10]范围外的行，依据如下：

对商品单次购买量分段进行频数分布统计，可知：对于任意品类商品，其单次商品购买量在0~10件之间的订单数均占了总订单数的95%以上。因此可认为这部分基数最大的买家为普通个人用户，其登记的信息(婴儿年龄、性别)在用户维度分析中具有参考性。超出该区间，单次购买量较大的数据或为批发商或团购购入，其用户信息不应记入本次分析数据中。

<img src="http://qiwjidhsu.hn-bkt.clouddn.com/1024_5.2.jpg" alt="alt" style="zoom: 50%;" /> 

② 增加“购买时年龄”(购买日期-出生日期)列，删除购买时年龄超出[-2，7]的行。(考虑母婴商品使用年龄段约为0~7岁及产前提前购买的情况，超出范围的异常值或为信息填写错误导致)

③ 删除性别为unknown的行。

7) 增加“购买时年龄段”列，根据生理特点进一步将儿童年龄划分为4个年龄段：预产期(-2~0岁)、婴儿期(0~1岁)、幼儿期(1~3岁)、学前期(3~7岁)，以供后续分析作图使用。

经上述处理后共获得899条有效信息，部分数据如下图所示：

<img src="http://qiwjidhsu.hn-bkt.clouddn.com/1024_6.jpg" alt="alt"  />

## 数据分析及可视化

对不同商品品类，以年龄区间-订单数为轴，性别为分项，做柱状堆积图如下：

![alt](http://qiwjidhsu.hn-bkt.clouddn.com/1024_7.jpg)

计算不同商品品类，不同性别平均单次购买量：

|              |       男       |        |       女       |        |
| :----------: | :------------: | :----: | :------------: | :----: |
| **商品分类** | 平均单次购买量 | 标准差 | 平均单次购买量 | 标准差 |
|      28      |      1.3       |  1.1   |      1.2       |  1.0   |
|      38      |      2.7       |  2.4   |      2.1       |  1.7   |
|   50008168   |      1.1       |  0.6   |      1.2       |  0.8   |
|   50014815   |      1.6       |  1.6   |      1.3       |  1.0   |
|   50022520   |      1.0       |  0.2   |      1.4       |  1.5   |
|  122650008   |      1.1       |  0.3   |      1.0       |  0.0   |

对应柱状图如下：

<img src="http://qiwjidhsu.hn-bkt.clouddn.com/1024_9.jpg" alt="alt" style="zoom:80%;" />

可以得到如下结论：

1) 性别影响

不同性别的用户对所有商品种类并没有表现出显著的偏好差异，同时单次购买商品的数量也较为相近。即无论何种性别，其对于母婴商品的需求量及需求程度是较为一致的。

原因或在于婴幼儿生理差异较小，尚未分化出基于性别的特定需求。相关商品可能无需在性别上做出分化调整。

2) 年龄影响

① **商品28，50008168**在0~7岁范围内都有均衡的需求，可以认为该类商品为较为通用的母婴产品，在全年龄段内都能起作用。

② **商品38，50014815**在0~3岁的婴幼儿期内较为受欢迎，可认为该类商品偏向于早期婴幼儿护理的应用。

③ **商品122650008**在1~7岁的幼儿及学前儿童中较受欢迎，可认为该类商品面向年龄段较大的儿童用户。

④ **商品50022520**大量订单均来自预产期前的用户，可认为该类商品多为初生婴孩提供基础性的应用。

本次分析并非为了解决特定问题，仅为初步挖掘信息间的相关关系，在结论上也有待更多数据验证。希望能够通过本次分析，在有限的信息内更好地把握现状，为后续优化推荐及搜索结果、对策实施提供方向和依据。